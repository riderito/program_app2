#!/bin/bash

# Проверка количества аргументов
# -ne - оператор сравнения "не равно"
if [ $# -ne 3 ]; then
    echo "Ошибка: необходимо передать три аргумента" >&2
    echo "Пример корректного ввода: $0 <число1> <оператор> <число2>" >&2
    exit 1
fi

# Сохранение аргументов в переменные с понятными именами
num1="$1"
operator="$2"
num2="$3"

# Проверка, что оба аргумента являются целыми числами (включая отрицательные)
# =~ - оператор сравнения с регулярным выражением
# ^-?[0-9]+$ - регулярное выражение для целых чисел
if ! [[ "$num1" =~ ^-?[0-9]+$ ]] || ! [[ "$num2" =~ ^-?[0-9]+$ ]]; then
    echo "Ошибка: оба аргумента должны быть целыми числами" >&2
    exit 1
fi

# Выполнение операции перебором значения переменной operator через case
case "$operator" in
	+)	
		# Сложение
        	result=$((num1 + num2))
        	;;
	-)
		# Вычитание
		result=$((num1 - num2))
		;;
	\*)
		# Умножение: символ * экранирован обратным слэшем, 
        	# так как * имеет в Bash специальное назначение (подстановка файлов)
		result=$((num1 * num2))
 		;;
	/)
		# Деление с проверкой деления на ноль
		if [ "$num2" -eq 0 ]; then
			echo "Ошибка: деление на ноль невозможно" >&2
			exit 1
		fi

		result=$((num1 / num2))
		;;
    	*)
		# Обработка неподдерживаемых операторов (всех остальных значений operator)
        	echo "Ошибка: оператор '$operator' не поддерживается. Поддерживаются: +, -, '*', /" >&2
        	exit 1
        ;;
esac

# Вывод результата вычислений
echo "Результат: $result"